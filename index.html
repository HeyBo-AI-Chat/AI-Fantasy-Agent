<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI Fantasy Agent</title>
  <link rel="manifest" href="/manifest.json" />
  <meta name="theme-color" content="#0B132B" />
  <link rel="apple-touch-icon" href="/icon-192.png" />
  <style>
    :root { --bg:#0B132B; --fg:#fff; --muted:#94a3b8; --card:#111827; --accent:#22c55e; }
    * { box-sizing: border-box; }
    body { margin:0; font-family: system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial; background:var(--bg); color:var(--fg); }
    .wrap { max-width:390px; margin:0 auto; padding:16px; }
    .tabs { position:fixed; left:0; right:0; bottom:0; background:#111827; border-top:1px solid #1f2937; }
    .tabs .row{ display:flex; max-width:390px; margin:0 auto; }
    .tabbtn{ flex:1; padding:12px 4px; text-align:center; font-size:14px; color:#cbd5e1; border:none; background:transparent }
    .tabbtn.active{ color:var(--accent); font-weight:600; }
    .card{ background:#111827; border:1px solid #1f2937; border-radius:12px; padding:12px; margin-bottom:12px; }
    .row { display:flex; gap:8px; align-items:center; }
    .row.spread{ justify-content:space-between; }
    .btn{ background:var(--accent); color:#052; border:none; border-radius:10px; padding:10px 12px; font-weight:600; }
    .btn.muted{ background:#1f2937; color:#cbd5e1; }
    .input, select, textarea { width:100%; background:#0f172a; color:#fff; border:1px solid #1f2937; border-radius:10px; padding:10px; }
    textarea{ min-height:100px; }
    .hide { display:none; }
    .badge { font-size:12px; color:#94a3b8 }
    a.card { display:block; color:inherit; text-decoration:none; }
/* Utility */
.hidden { display: none !important; }
.active { opacity: 1; }

/* Page container */
.container, main, body {
  max-width: 680px;
  margin: 0 auto;
  padding: 0 12px;
  box-sizing: border-box;
}

/* Make inputs/buttons full-width by default on phones */
input[type="text"],
input[type="number"],
input[type="file"],
select,
textarea,
button {
  width: 100%;
  box-sizing: border-box;
}

/* Two-up controls collapse to one column on small screens */
.grid-2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}
@media (max-width: 480px) {
  .grid-2 {
    grid-template-columns: 1fr;
  }
}

/* Cards/sections */
.section {
  background: rgba(255,255,255,0.03);
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: 10px;
  padding: 12px;
  margin: 14px 0;
}

/* Bottom nav stays visible but doesnâ€™t overlap content */
#tabs {
  position: sticky;
  bottom: 0;
  background: #0e1726;
  padding: 8px 6px;
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: 6px;
}
#tabs .tabbtn {
  border: 1px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.06);
  padding: 8px 6px;
  border-radius: 8px;
  font-size: 12px;
}
#tabs .tabbtn.active {
  background: #1fb868;
  color: #0e1726;
  border-color: #1fb868;
}

/* Kill any accidental horizontal scroll */
html, body { overflow-x: hidden; }
  </style>
</head>
<body>
<div class="wrap">
  <h2 style="margin:0 0 8px 0;">AI Fantasy Agent</h2>

  <div id="profile">
  <h3>Your Profile</h3>
  <input type="file" id="uploadProfile" accept="image/*" />
  <img id="profilePreview" src="" alt="Profile Picture" />
</div>
 <div id="addTeam">
  <h3>Add Fantasy Team</h3>
  <input id="platform" placeholder="Platform (ESPN, DraftKings...)" />
  <input id="leagueId" placeholder="League ID" />
  <input id="teamName" placeholder="Team Name" />
  <button id="saveTeam">Save</button>
</div> 
 <div class="card">
  <b>Team Profile</b>
  <input type="file" id="avatarFile" accept="image/*" />
  <img id="avatarPreview" style="max-width:120px;border-radius:8px;margin-top:8px"/>
</div>
  <!-- season/week controls + compute -->
  <div class="row" style="gap:8px; margin-bottom:12px;">
    <select id="season"></select>
    <select id="week"></select>
    <button id="btnCompute" class="btn">Compute</button>
  </div>

  <!-- DRAFT -->
  <section id="tab-draft">
    <div class="row spread" style="margin:8px 0;">
      <b>Draft</b><span id="draftCount" class="badge">0</span>
    </div>
    <div id="draftList"></div>
 button class="tabbtn active" data-t="draft">Draft</button>
  </section>
<!-- External platforms mini form -->
<div class="card" style="margin-top:12px">
  <b>Link External Platform</b>
  <div class="row" style="gap:8px; margin-top:8px">
    <select id="srcPlatform" style="flex:1">
      <option value="DraftKings">DraftKings</option>
      <option value="FanDuel">FanDuel</option>
      <option value="Yahoo">Yahoo</option>
      <option value="ESPN">ESPN</option>
      <option value="Sleeper">Sleeper</option>
      <option value="Other">Other</option>
    </select>
    <input id="srcHandle" placeholder="Username / League ID" style="flex:1" />
  </div>
  <input id="srcNotes" placeholder="Notes (optional)" style="margin-top:8px; width:100%" />
  <div class="row spread" style="margin-top:8px">
    <button id="btnAddSource" class="btn">Add</button>
    <span id="srcStatus" class="badge"></span>
  </div>
</div>

<!-- List of saved sources -->
<div class="card" style="margin-top:8px">
  <b>Linked Sources</b>
  <div id="sourcesList" style="margin-top:8px"></div>
</div>
  <!-- ROSTER -->
  <section id="tab-roster" class="hide">
    <div class="row spread" style="margin:8px 0;">
      <b>Roster</b><span id="rosterCount" class="badge">0</span>
    </div>
    <div id="rosterList"></div>
 <div class="player-row" data-player-id="PLAYER123">
  
</div>
button>
  <button class="tabbtn" data-t="roster">Roster</button>
  </section>
<div class="card" style="margin-top:12px">
  <b>Add External Platform</b>
  <div class="row" style="gap:8px; margin-top:8px">
    <input id="srcPlatform" placeholder="Platform (DraftKings, Yahoo...)" />
    <input id="srcHandle"   placeholder="Handle / League ID / URL slug" />
  </div>
  <textarea id="srcNotes" placeholder="Notes (optional)"></textarea>
  <div class="row" style="gap:8px; margin-top:8px">
    <button class="btn" id="btnAddSource">Save</button>
    <button class="btn muted" id="btnReloadSources">Reload</button>
  </div>
  <div class="card">
  <b>Link external platform</b>
  <div class="row" style="gap:8px; margin-top:8px">
    <input id="srcPlatform" placeholder="Platform (e.g., DraftKings)" />
    <input id="srcHandle"   placeholder="Handle / League ID" />
    <input id="srcNotes"    placeholder="Notes (optional)" />
    <button id="btnAddSource" class="btn">Save</button>
  </div>
</div>

<div id="sourcesList" class="card"></div>
  <div id="sourcesList" style="margin-top:8px"></div>
</div>
  <!-- LINEUP -->
  <section id="tab-lineup" class="hide">
    <div class="row spread" style="margin:8px 0;">
      <b>Lineup</b>
      <button id="btnSaveLineup" class="btn">Save lineup</button>
    </div>
    <div class="card">
      <b>Starters</b>
      <div id="starters"></div>
    <div class="player-row" data-player-id="PLAYER123">
  <div>Stefon Diggs</div>
  <div>Pts: <span class="pts">0.0</span></div>
</div>
    </div>
    <div class="card">
      <b>Bench</b>
      <div id="bench"></div>
   <div class="player-row" data-player-id="PLAYER123">
  <div>Stefon Diggs</div>
  <div>Pts: <span class="pts">0.0</span></div>
</div>
    </div>
<button class="tabbtn" data-t="lineup">Lineup</button>
  </section>

  <!-- SCORES -->
  <!-- SCORES -->
<section id="tab-scores" class="hide">
  <div class="row spread" style="margin:8px 0">
    <b>Scores</b>
    <span id="scoresUpdated" class="badge" style="opacity:.7">â€”</span>
  </div>

  <div class="card">
    <div class="row spread">
      <div><b>Team total</b></div>
      <div id="teamTotal">0.0</div>
    </div>
  </div>

  <div id="scoresList"></div>
<button class="tabbtn" data-t="scores">Scores</button>
</section>
 <div class="player-row" data-player-id="PLAYER123">
  <div>Stefon Diggs</div>
  <div>Pts: <span class="pts">0.0</span></div>
</div>
  </section>

  <!-- NEWS -->
  <section id="tab-news" class="hide">
    <div class="row spread" style="margin:8px 0;">
      <b>News & Injuries</b>
      <button id="btnRefreshNews" class="btn muted">Refresh</button>
    </div>
    <div id="newsList"></div>
<button class="tabbtn" data-t="news">News</button>
  </section>

  <!-- AGENT (voice in/out) -->
  <section id="tab-agent" class="hide">
    <div class="row spread" style="margin:8px 0;">
      <b>Agent</b>
      <div class="row" style="gap:8px;">
        <button id="btnTTS" class="btn muted" title="Toggle speech output">ðŸ”ˆ Speak: Off</button>
        <button id="btnMic" class="btn" title="Hold to talk">ðŸŽ¤ Hold</button>
      </div>
    </div>

    <div class="card" style="margin-bottom:8px;">
      <div id="voiceStatus" class="badge">Mic idle</div>
    </div>

    <textarea id="agentInput" class="input" placeholder="Ask Agentâ€¦ e.g. Start/Sit for Week 3"></textarea>
    <div class="row" style="gap:8px; margin:8px 0;">
      <button class="tabbtn" data-t="agent">Agent</button>
    </div>
    <div id="agentReply" class="card"></div>
  </section>

  <div style="height:80px"></div>
</div>

<!-- bottom nav -->
<nav id="tabs">
  <button type="button" class="tabbtn active" data-t="draft">Draft</button>
  <button type="button" class="tabbtn" data-t="roster">Roster</button>
  <button type="button" class="tabbtn" data-t="lineup">Lineup</button>
  <button type="button" class="tabbtn" data-t="scores">Scores</button>
  <button type="button" class="tabbtn" data-t="news">News</button>
  <button type="button" class="tabbtn" data-t="agent">Agent</button>
</nav>

<script src="./config.js"></script>
<script src="./app.js"></script>
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js');
  }
</script>
</body>
</html>
// Remove any leftover demo points line if present
document.addEventListener('DOMContentLoaded', () => {
  const demo = Array.from(document.querySelectorAll('*'))
    .find(n => n.childNodes && [...n.childNodes].some(c => c.nodeType === 3 && /Stefon Diggs/i.test(c.textContent)));
  if (demo) demo.remove();
});
