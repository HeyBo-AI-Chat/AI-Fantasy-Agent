<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI Fantasy Agent</title>
  <link rel="manifest" href="/manifest.json" />
  <meta name="theme-color" content="#0B132B" />
  <link rel="apple-touch-icon" href="/icon-192.png" />
  <style>
    :root { --bg:#0B132B; --fg:#fff; --muted:#94a3b8; --card:#111827; --accent:#22c55e; }
    * { box-sizing: border-box; }
    body { margin:0; font-family: system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial; background:var(--bg); color:var(--fg); }
    .wrap { max-width:390px; margin:0 auto; padding:16px; }
    .tabs { position:fixed; left:0; right:0; bottom:0; background:#111827; border-top:1px solid #1f2937; }
    .tabs .row{ display:flex; max-width:390px; margin:0 auto; }
    .tabbtn{ flex:1; padding:12px 4px; text-align:center; font-size:14px; color:#cbd5e1; border:none; background:transparent }
    .tabbtn.active{ color:var(--accent); font-weight:600; }
    .card{ background:#111827; border:1px solid #1f2937; border-radius:12px; padding:12px; margin-bottom:12px; }
    .row { display:flex; gap:8px; align-items:center; }
    .row.spread{ justify-content:space-between; }
    .btn{ background:var(--accent); color:#052; border:none; border-radius:10px; padding:10px 12px; font-weight:600; }
    .btn.muted{ background:#1f2937; color:#cbd5e1; }
    .input, select, textarea { width:100%; background:#0f172a; color:#fff; border:1px solid #1f2937; border-radius:10px; padding:10px; }
    textarea{ min-height:100px; }
    .hide { display:none; }
    .badge { font-size:12px; color:#94a3b8 }
    a.card { display:block; color:inherit; text-decoration:none; }
  </style>
</head>
<body>
<div class="wrap">
  <h2 style="margin:0 0 8px 0;">AI Fantasy Agent</h2>

  <!-- season/week controls + compute -->
  <div class="row" style="gap:8px; margin-bottom:12px;">
    <select id="season"></select>
    <select id="week"></select>
    <button id="btnCompute" class="btn">Compute</button>
  </div>

  <!-- DRAFT -->
  <section id="tab-draft">
    <div class="row spread" style="margin:8px 0;">
      <b>Draft</b><span id="draftCount" class="badge">0</span>
    </div>
    <div id="draftList"></div>
  </section>

  <!-- ROSTER -->
  <section id="tab-roster" class="hide">
    <div class="row spread" style="margin:8px 0;">
      <b>Roster</b><span id="rosterCount" class="badge">0</span>
    </div>
    <div id="rosterList"></div>
  </section>

  <!-- LINEUP -->
  <section id="tab-lineup" class="hide">
    <div class="row spread" style="margin:8px 0;">
      <b>Lineup</b>
      <button id="btnSaveLineup" class="btn">Save lineup</button>
    </div>
    <div class="card">
      <b>Starters</b>
      <div id="starters"></div>
    </div>
    <div class="card">
      <b>Bench</b>
      <div id="bench"></div>
    </div>
  </section>

  <!-- SCORES -->
  <section id="tab-scores" class="hide">
    <div class="row spread" style="margin:8px 0;"><b>Scores</b></div>
    <div id="scoresList"></div>
  </section>

  <!-- NEWS -->
  <section id="tab-news" class="hide">
    <div class="row spread" style="margin:8px 0;">
      <b>News & Injuries</b>
      <button id="btnRefreshNews" class="btn muted">Refresh</button>
    </div>
    <div id="newsList"></div>
  </section>

  <!-- AGENT (voice in/out) -->
  <section id="tab-agent" class="hide">
    <div class="row spread" style="margin:8px 0;">
      <b>Agent</b>
      <div class="row" style="gap:8px;">
        <button id="btnTTS" class="btn muted" title="Toggle speech output">ðŸ”ˆ Speak: Off</button>
        <button id="btnMic" class="btn" title="Hold to talk">ðŸŽ¤ Hold</button>
      </div>
    </div>

    <div class="card" style="margin-bottom:8px;">
      <div id="voiceStatus" class="badge">Mic idle</div>
    </div>

    <textarea id="agentInput" class="input" placeholder="Ask Agentâ€¦ e.g. Start/Sit for Week 3"></textarea>
    <div class="row" style="gap:8px; margin:8px 0;">
      <button id="btnAsk" class="btn">Ask Agent</button>
    </div>
    <div id="agentReply" class="card"></div>
  </section>

  <div style="height:80px"></div>
</div>

<!-- bottom nav -->
<nav class="tabs">
  <div class="row">
    <button class="tabbtn active" data-t="draft">Draft</button>
    <button class="tabbtn" data-t="roster">Roster</button>
    <button class="tabbtn" data-t="lineup">Lineup</button>
    <button class="tabbtn" data-t="scores">Scores</button>
    <button class="tabbtn" data-t="news">News</button>
    <button class="tabbtn" data-t="agent">Agent</button>
  </div>
</nav>

<script src="./config.js"></script>
<script src="./app.js"></script>
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js');
  }
</script>
</body>
</html>
